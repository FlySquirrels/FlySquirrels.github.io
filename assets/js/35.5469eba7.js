(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{318:function(s,n,a){"use strict";a.r(n);var t=a(14),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"shell-gitå®ç°è‡ªåŠ¨åŒ–æ„å»º"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#shell-gitå®ç°è‡ªåŠ¨åŒ–æ„å»º"}},[s._v("#")]),s._v(" "),n("center",[s._v(" Shell + Gitå®ç°è‡ªåŠ¨åŒ–æ„å»º ")])],1),s._v(" "),n("h2",{attrs:{id:"å‰æè¦æ±‚"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‰æè¦æ±‚"}},[s._v("#")]),s._v(" å‰æè¦æ±‚")]),s._v(" "),n("p",[s._v("æœ¬ç¯‡æ–‡ç« ä»¥å½“å‰æ–‡æ¡£é¡¹ç›®ä¸ºä¾‹ï¼Œæ‰€éœ€è½¯ä»¶å¯æ ¹æ®éœ€è¦ä¿®æ”¹"),n("br"),s._v("\nå‡è®¾ä½ å¯¹ä»¥ä¸‹æŠ€æœ¯æœ‰ä¸€å®šçš„äº†è§£,è¿™é‡Œå°±ä¸åšå…¥é—¨å®‰è£…ä»‹ç»")]),s._v(" "),n("ul",[n("li",[s._v("Git v2.30.2")]),s._v(" "),n("li",[s._v("GitHub or Gitee")]),s._v(" "),n("li",[s._v("éœ€è¦ç”Ÿæˆå¯†é’¥,æ·»åŠ åˆ°æœ¬åœ°,å†å°†å…¬é’¥ä¸Šä¼ gitee/github")]),s._v(" "),n("li",[s._v("Nginx v1.18.0")]),s._v(" "),n("li",[s._v("Node v12.22.12")]),s._v(" "),n("li",[s._v("npm v7.5.2")])]),s._v(" "),n("h2",{attrs:{id:"é¡¹ç›®æ¡ˆä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é¡¹ç›®æ¡ˆä¾‹"}},[s._v("#")]),s._v(" é¡¹ç›®æ¡ˆä¾‹")]),s._v(" "),n("p",[s._v("åˆ›å»ºèµ„æº")]),s._v(" "),n("ul",[n("li",[s._v("nodeé¡¹ç›®åˆ›å»º")]),s._v(" "),n("li",[s._v("githubè¿œç¨‹ä»“åº“åˆ›å»º")]),s._v(" "),n("li",[s._v("ngixé…ç½®è¯»å–nodeæ‰“åŒ…çš„distæ–‡ä»¶å¤¹")])]),s._v(" "),n("p",[s._v("ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬ğŸ“‹ğŸ“‹ğŸ“‹")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¯¥è„šæœ¬è¯·æ±‚ç‰ˆæœ¬æ˜¯å¦æ›´æ–°ï¼Œå¦‚æœæ›´æ–°é¡¹ç›®æ‹‰å–ç¼–è¯‘")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆå§‹åŒ–æ‰é…ç½®ä»“åº“åœ°å€å’Œå…‹éš†ä»“åº“")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é…ç½®ä»“åº“åœ°å€")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REPO_URL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git@github.com:xxxx/xxxx.git"')]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆå§‹åŒ–æ‹‰å–æ—¶è¢«æ›´æ”¹è€Œä¸åˆå¹¶")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#git config pull.rebase true")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å…‹éš†ä»“åº“")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#git clone $REPO_URL")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿›å…¥ä»“åº“ç›®å½•")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /xxx/xx/xxx\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆå§‹åŒ–å˜é‡ï¼Œç”¨äºè®°å½•ä¸Šæ¬¡æäº¤çš„å“ˆå¸Œå€¼")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LAST_COMMIT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ— é™å¾ªç¯ï¼Œæ£€æµ‹ä»“åº“å˜åŒ–")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è·å–å½“å‰æœ€æ–°æäº¤çš„å“ˆå¸Œå€¼")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CURRENT_COMMIT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ls-remote $REPO_URL HEAD"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¦‚æœå½“å‰æäº¤çš„å“ˆå¸Œå€¼ä¸ä¸Šæ¬¡æäº¤çš„å“ˆå¸Œå€¼ä¸åŒï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹æ“ä½œ")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CURRENT_COMMIT")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LAST_COMMIT")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\n         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é˜²æ­¢æœ¬åœ°ä»“åº“çš„æœªçŸ¥æ›´æ”¹é˜»å¡æ›´æ–°")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ›´æ–°æœ¬åœ°ä»“åº“")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master\n\n         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å®‰è£…ä¾èµ–")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ„å»ºé¡¹ç›®")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run docs:build\n\n         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ›´æ–°ä¸Šæ¬¡æäº¤çš„å“ˆå¸Œå€¼")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LAST_COMMIT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CURRENT_COMMIT")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡æ£€æµ‹")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br")])]),n("p",[s._v("å…¶ä»–å®¢æˆ·ç«¯æ‹‰å–é¡¹ç›®å¹¶ä¿®æ”¹æäº¤")]),s._v(" "),n("h2",{attrs:{id:"æ ¸å¿ƒè¦ç‚¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒè¦ç‚¹"}},[s._v("#")]),s._v(" æ ¸å¿ƒè¦ç‚¹")]),s._v(" "),n("p",[s._v("è„šæœ¬æ ¸å¿ƒè§£æ")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é…ç½®ä»“åº“åœ°å€")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REPO_URL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git@github.com:xxxx/xxxx.git"')]),s._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿›å…¥ä»“åº“ç›®å½•")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /xxx/xx/xxx\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®°å½•ä¸Šæ¬¡æäº¤çš„gitè¿œç¨‹ä»“åº“å“ˆå¸Œå€¼")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LAST_COMMIT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ— é™å¾ªç¯ï¼Œæ£€æµ‹ä»“åº“å˜åŒ–")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è·å–å½“å‰æœ€æ–°æäº¤çš„å“ˆå¸Œå€¼")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CURRENT_COMMIT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ls-remote $REPO_URL HEAD"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¦‚æœå½“å‰æäº¤çš„å“ˆå¸Œå€¼ä¸ä¸Šæ¬¡æäº¤çš„å“ˆå¸Œå€¼ä¸åŒï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹æ“ä½œ")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CURRENT_COMMIT")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LAST_COMMIT")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é˜²æ­¢æœ¬åœ°ä»“åº“çš„æœªçŸ¥æ›´æ”¹é˜»å¡æ›´æ–°")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ›´æ–°æœ¬åœ°ä»“åº“")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è‡ªå®šä¹‰ä»£ç åº“æ›´æ–°æ“ä½œ")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# TO-DO")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ›´æ–°ä¸Šæ¬¡æäº¤çš„å“ˆå¸Œå€¼")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LAST_COMMIT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CURRENT_COMMIT")]),s._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡æ£€æµ‹")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("p",[s._v("é€šè¿‡ä¸€ä¸ªwhileå¾ªç¯æ¥ä¸æ–­æ£€æµ‹ä»“åº“ï¼Œå¦‚æœä»“åº“æ›´æ–°ï¼Œå°±æ‹‰å–ä»£ç ï¼Œæ‰§è¡Œå‘½ä»¤")]),s._v(" "),n("div",{staticClass:"custom-block danger"},[n("p",{staticClass:"custom-block-title"},[s._v("DANGER")]),s._v(" "),n("p",[s._v("æœ¬å®ä¾‹è¿˜å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œéœ€è‡ªè¡Œä¿®æ­£"),n("br")]),s._v(" "),n("ul",[n("li",[s._v("å¦ä¸€å°ä¸»æœºæäº¤åï¼Œè„šæœ¬æ›´æ–°æœ¬åœ°ä»“åº“å¯èƒ½ç¼–è¯‘ä¸é€šè¿‡ï¼Œå»ºè®®æœ¬åœ°ç¯å¢ƒæµ‹è¯•é€šè¿‡åæäº¤")]),s._v(" "),n("li",[s._v("è„šæœ¬å¶å°”å¼‚å¸¸é€€å‡ºï¼ŒæœªçŸ¥åŸå› ")])])]),s._v(" "),n("h2",{attrs:{id:"ç²—å¿ƒå¤§æ„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç²—å¿ƒå¤§æ„"}},[s._v("#")]),s._v(" ç²—å¿ƒå¤§æ„")]),s._v(" "),n("p",[s._v("è§¦å‘åŸå› : ç”±äºä¸€ä¸ªæœåŠ¡å™¨éƒ¨ç½²å¤šä¸ªé¡¹ç›®ï¼Œä¸é€‚ç”¨åŸŸåä½œä¸ºå…¥å£ï¼Œè®¾ç½®configçš„base:'/doc/'")]),s._v(" "),n("p",[s._v("nginx é…ç½® /doc å¯¼è‡´æ•°æ®è®¿é—®ä¸åˆ°")]),s._v(" "),n("p",[s._v("ä¿®æ”¹")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" # è®¾ç½® location\n      location /doc/ {\n  \t\talias /www/yunsheng/docs/.vuepress/dist/;\n          index index.html;\n  \t\ttry_files $uri $uri/ index.html;\n      }\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"å®é™…æ¡ˆä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®é™…æ¡ˆä¾‹"}},[s._v("#")]),s._v(" å®é™…æ¡ˆä¾‹")]),s._v(" "),n("p",[s._v("java vue")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# åˆå§‹åŒ–æ‰é…ç½®ä»“åº“åœ°å€å’Œå…‹éš†ä»“åº“\n# é…ç½®ä»“åº“åœ°å€\nREPO_URL="git@gitee.com:fufuandrice/autumn-moon-music.git"\n\n# åˆå§‹åŒ–å˜é‡ï¼Œç”¨äºè®°å½•ä¸Šæ¬¡æäº¤çš„å“ˆå¸Œå€¼\nLAST_COMMIT=""\n\n# åˆå§‹åŒ–è®°å½•è¿è¡Œçš„javaçš„pid\njavapid=""\n\n# æ— é™å¾ªç¯ï¼Œæ£€æµ‹ä»“åº“å˜åŒ–\nwhile true; do\n  # è·å–å½“å‰æœ€æ–°æäº¤çš„å“ˆå¸Œå€¼\n  CURRENT_COMMIT=$(git ls-remote $REPO_URL HEAD)\n\n  # å¦‚æœå½“å‰æäº¤çš„å“ˆå¸Œå€¼ä¸ä¸Šæ¬¡æäº¤çš„å“ˆå¸Œå€¼ä¸åŒï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹æ“ä½œ\n  if [ "$CURRENT_COMMIT" != "$LAST_COMMIT" ]; then\n    \n    # åœæ­¢è¿è¡Œå†å²javaç¨‹åº\n    kill -9 $javapid\n    \n    # è¿›å…¥ä»“åº“ç›®å½•\n    cd /www/qiuyue/autumn-moon-music\n    \n    # é˜²æ­¢æœ¬åœ°ä»“åº“çš„æœªçŸ¥æ›´æ”¹é˜»å¡æ›´æ–°\n    git checkout .\n\n    # æ›´æ–°æœ¬åœ°ä»“åº“\n    git pull --rebase origin master\n\n    # å®‰è£…åå°ç½‘é¡µä¾èµ–\n    cd /www/qiuyue/autumn-moon-music/QiuYueServer/ruoyi-ui\n    npm install --legacy-peer-deps \n\n    # æ„å»ºåå°ç½‘é¡µ\n    npm run build:prod\n\n    # æ‰“åŒ…æœåŠ¡ç«¯\n    cd /www/qiuyue/autumn-moon-music/QiuYueServer\n    mvn clean \n    mvn package\n\n    # è¿è¡ŒæœåŠ¡ç«¯\n    cd /www/qiuyue/autumn-moon-music/QiuYueServer/ruoyi-admin/target\n    java -jar /www/qiuyue/autumn-moon-music/QiuYueServer/ruoyi-admin/target/ruoyi-admin.jar -Xms500m -Xmx500m â€XX:+UseG1GC -XX:MaxGCPauseMillis=350 -XX:SurvivorRatio=8 &\n    \n    # è·å–æœåŠ¡ç«¯pid\n    javapid=$!\n    \n    # æ›´æ–°ä¸Šæ¬¡æäº¤çš„å“ˆå¸Œå€¼\n    LAST_COMMIT=$CURRENT_COMMIT\n  fi\n\n  # è¿è¡Œé¡¹ç›®\n  # ç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡æ£€æµ‹\n  sleep 60\ndone\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);